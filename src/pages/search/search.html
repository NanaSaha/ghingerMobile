<ion-header>
  <ion-navbar>
    <ion-title>Choose Location</ion-title>
    <ion-buttons end class="margin" tappable (tap)="home()">
      <button ion-button icon-only>
        <ion-icon name="home"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>

<ion-content class="background">
  <div class="aliText">
    <ion-item no-lines>
      <h3 class="BigText">Your Location</h3>
      <p>Please tell us your location...</p>
    </ion-item>
  </div>

  <div class="direct_service_row2">
    <div class="c3">
      <form [formGroup]="searchForm" class="padd" text-wrap>
        <ion-item text-wrap>
          <ion-label floating>Choose City</ion-label>
          <ionic-selectable
            item-content
            [(ngModel)]="city_id"
            [items]="cities"
            itemValueField="id"
            itemTextField="name"
            [canSearch]="true"
            (onChange)="get_suburbs(city_id)"
            formControlName="city_id"
            name="city_town_name"
            [class.invalid]="!searchForm.controls.city_id.valid && (searchForm.controls.city_id.dirty || submitAttempt)"
          >
          </ionic-selectable>
        </ion-item>

        <br />

        <ion-item *ngIf="searchForm.value.city_id" text-wrap>
          <ion-label floating>Choose Surburb</ion-label>
          <ionic-selectable
            item-content
            [(ngModel)]="surburb_id"
            [items]="suburbs"
            itemValueField="id"
            itemTextField="name"
            [canSearch]="true"
            formControlName="suburb_id"
            (onChange)="surburbChange($event)"
            name="suburb_name"
            [class.invalid]="!searchForm.controls.suburb_id.valid && (searchForm.controls.suburb_id.dirty || submitAttempt)"
          >
          </ionic-selectable>
        </ion-item>

        <br />

        <div padding style="text-align: center">
          <button
            ion-button
            class="small_button"
            color="primary"
            round
            [disabled]="!this.searchForm.valid"
            (tap)="go()"
          >
            Proceed
          </button>
        </div>
      </form>
    </div>
    <br />
    <br />

    <br />
  </div>
  <br />
  <br />

  <br />
</ion-content>
